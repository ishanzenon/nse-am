futures:
  sheet_name: FuData
  layout: left_to_right
  table_spacing_rows: 2
  windows:
    dual: true
    primary:
      start_rule: prev_1_expiry_plus_1
      end_rule: current_expiry
      summary_scope: W1
    overlap:
      start_rule: prev_3_expiry_plus_1
      end_rule: current_expiry
  expiry_policy:
    weekday_policy:
      legacy_weekday: Thursday
      revised_weekday: Tuesday
      effective_eod: 2025-08-28
  sources:
    registry:
      udiff_fo:
        identifier: udiff_fo
        strategy: url_pattern
        cache_subdir: raw/fo_udiff
        url_pattern: "https://nsearchives.nseindia.com/content/fo/BhavCopy_NSE_FO_0_0_0_{YYYY}{MM}{DD}_F_0000.csv.zip"
        rate_limit_seconds: 0.6
        retries: 3
        timeout_seconds: 30
        hashing:
          enabled: true
          algorithm: sha256
          manifest_extension: .sha256
        quarantine_on_unexpected_columns: true
        column_aliases:
          trade_date:
            - TRD_DT
            - TRADE_DATE
            - TIMESTAMP
            - TRADDT
            - BIZDT
          instrument:
            - INSTRUMENT
            - FININSTRMTP
          symbol:
            - SYMBOL
            - TCKRSYMB
            - FININSTRMID
          expiry_date:
            - EXPIRY_DATE
            - EXPIRY_DT
            - EXPIRY
            - XPRYDT
            - FININSTRMACTLXPRYDT
          open:
            - OPEN
            - OPEN_PRICE
            - OPNPRIC
          high:
            - HIGH
            - HIGH_PRICE
            - HGHPRIC
          low:
            - LOW
            - LOW_PRICE
            - LWPRIC
          close:
            - CLOSE
            - CLOSE_PRICE
            - CLSPRIC
          settle_price:
            - SETTLE_PRICE
            - SETTLE_PR
            - SETTL_PRICE
            - SETT_PR
            - SETL_PR
            - STTLMPRIC
          contracts:
            - CONTRACTS
            - NO_OF_CONTRACTS
            - TTLTRADGVOL
          value_lakhs:
            - VAL_INLAKH
            - VAL_IN_LAKH
            - TTLTRFVAL
          open_interest_contracts:
            - OPEN_INT
            - OPENINT
            - OPEN_INTEREST
            - OI
            - OPNINTRST
          change_in_oi_contracts:
            - CHG_IN_OI
            - CHANGE_IN_OI
            - CHNG_IN_OI
            - CHNGINOPNINTRST
          lot_size_shares:
            - LOT_SIZE
            - LOTSIZE
            - LOT
            - LOT_QTY
            - NEWBRDLOTQTY
      mwpl_combined:
        identifier: mwpl_combined
        strategy: discovery
        cache_subdir: raw/mwpl
        discovery: reports_index|pattern
        rate_limit_seconds: 0.6
        retries: 3
        timeout_seconds: 30
        hashing:
          enabled: true
          algorithm: sha256
          manifest_extension: .sha256
        quarantine_on_unexpected_columns: true
        column_aliases:
          trade_date:
            - TRADE_DATE
            - TRD_DT
            - DATE
          symbol:
            - SYMBOL
            - SECURITY
            - SCRIP
          mwpl_shares:
            - MWPL_SHARES
            - MWPL
            - MKT_WIDE_POS_LIMIT
          combined_oi_shares:
            - COMBINED_OI_SHARES
            - COMBINED_OI
            - TOTAL_OI
    oi: bhavcopy_only
    lot_size:
      mode: bhavcopy_daily
      planned_upgrade: permitted_lot_size_at_window_start
      conflict_policy: permitted_wins
  mwpl_policy:
    refresh_daily: true
    use_latest: true

display_rounding:
  enabled: true
  digits:
    prices: 2
    quantities: 0
    contracts: 0

runtime:
  storage_root: ./data
  symbols:
    - FEDERALBNK
  parallelism: 1
  fail_fast: false
